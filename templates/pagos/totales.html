{% extends "base_template.html" %}

{% block title %}Totales{% endblock %}
{% block style %}
<style>
  .total{
    background-color: yellow;
    color: #aaa;
  }
  </style>
  {% endblock %}

{% block content %}

<div class="container">
    <p class="title is-1">Totales Cobrados</p>

    {{tbl|safe}}


</div>
{% endblock %}

{% block script %}
<script>
   let tableId = document.getElementById('totales')
   let tbody = tableId.querySelector('tbody');
        let rowsArray = Array.from(tbody.rows);
        let rowIndex=[];
        rowsArray.forEach((row)=>{
                rowIndex.push(row.rowIndex-1)
        });
        let maxRow = Math.max(...rowIndex)+1;
        let $rowTotal = tbody.insertRow(maxRow);
        let $cell0 = $rowTotal.insertCell(0);
        $cell0.innerHTML = "Total";
        $rowTotal.classList.add('total');

        const cols = rowsArray[0].children.length // determino la cant columnas
        for(let i=1;i<cols;i++){
        let col = [];
        rowIndex.forEach((ix)=>{
            col.push(nop(tbody.rows[ix].cells[i].innerText))
        });
        let total = col.reduce((a,b)=>Number(a)+Number(b));
        let $cell = $rowTotal.insertCell(i);
        if (!(Number.isNaN(total))) $cell.innerHTML = total
        }
  const app = new Vue({
    el:"#app",
    delimiters:['|','|'],
    data:{
    },
    methods:{
    },
  })
  </script>
  {% endblock %}